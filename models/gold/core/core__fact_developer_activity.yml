version: 2

models:
  - name: core__fact_developer_activity
    description: |-
      Comprehensive fact table containing NEAR Protocol ecosystem developer activity metrics sourced from GitHub and other development platforms. This model serves as the primary source of truth for developer engagement data in the gold layer, providing normalized access to repository activity, code contributions, and ecosystem development metrics. The model transforms raw GitHub API data from the silver layer into structured columns for efficient querying and analysis. It includes critical developer activity information such as repository metrics, contribution patterns, and ecosystem growth indicators. This table is essential for ecosystem analytics, developer engagement tracking, project health monitoring, and community growth analysis. The data flows from external GitHub APIs through silver__github_data, with endpoint-specific parsing applied to extract structured development metrics. This table supports understanding of NEAR ecosystem development velocity and community engagement patterns.

    columns:
      - name: REPO_OWNER
        description: "Repo owner"

      - name: REPO_NAME
        description: "Repo name"
        tests:
          - not_null

      - name: ENDPOINT_NAME
        description: "Endpoint name for the data"

      - name: DATA
        description: "Data from the endpoint"

      - name: PROVIDER
        description: "Provider for the data"

      - name: ENDPOINT_GITHUB
        description: " Endpoint for data"

      - name: SNAPSHOT_TIMESTAMP
        description: "Timestamp when the data was inserted into the table"

      - name: FACT_DEVELOPER_ACTIVITY_ID
        description: "{{doc('id')}}"
        tests:
          - not_null
          - unique:
              where: inserted_timestamp >= SYSDATE() - INTERVAL '{{ var('DBT_TEST_LOOKBACK_DAYS', 14) }} days'

      - name: INSERTED_TIMESTAMP
        description: "{{doc('inserted_timestamp')}}"

      - name: MODIFIED_TIMESTAMP
        description: "{{doc('modified_timestamp')}}"
